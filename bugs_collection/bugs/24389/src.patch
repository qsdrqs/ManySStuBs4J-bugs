diff --git a/buggy/clustering/server/src/main/java/org/wildfly/clustering/server/dispatcher/ChannelCommandDispatcherFactory.java b/fixed/clustering/server/src/main/java/org/wildfly/clustering/server/dispatcher/ChannelCommandDispatcherFactory.java
index 127977ff0..3a72cceab 100644
--- a/buggy/clustering/server/src/main/java/org/wildfly/clustering/server/dispatcher/ChannelCommandDispatcherFactory.java
+++ b/fixed/clustering/server/src/main/java/org/wildfly/clustering/server/dispatcher/ChannelCommandDispatcherFactory.java
@@ -103,7 +103,7 @@ public class ChannelCommandDispatcherFactory implements AutoCloseableCommandDisp
         this.marshallingContext = config.getMarshallingContext();
         this.timeout = config.getTimeout();
         JChannel channel = config.getChannel();
-        RequestCorrelator correlator = new RequestCorrelator(channel.getProtocolStack().getTransport(), this, channel.getAddress()).setMarshaller(new CommandResponseMarshaller(config));
+        RequestCorrelator correlator = new RequestCorrelator(channel.getProtocolStack(), this, channel.getAddress()).setMarshaller(new CommandResponseMarshaller(config));
         this.dispatcher = new MessageDispatcher()
                 .setChannel(channel)
                 .setRequestHandler(this)
