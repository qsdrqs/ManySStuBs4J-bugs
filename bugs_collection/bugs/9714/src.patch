diff --git a/buggy/ql/src/java/org/apache/hadoop/hive/ql/Driver.java b/fixed/ql/src/java/org/apache/hadoop/hive/ql/Driver.java
index 424f4fa63..cc85f310d 100644
--- a/buggy/ql/src/java/org/apache/hadoop/hive/ql/Driver.java
+++ b/fixed/ql/src/java/org/apache/hadoop/hive/ql/Driver.java
@@ -410,7 +410,7 @@ public class Driver implements CommandProcessor {
               HiveSemanticAnalyzerHook.class);
 
       // Do semantic analysis and plan generation
-      if (saHooks != null) {
+      if (saHooks != null && !saHooks.isEmpty()) {
         HiveSemanticAnalyzerHookContext hookCtx = new HiveSemanticAnalyzerHookContextImpl();
         hookCtx.setConf(conf);
         hookCtx.setUserName(userName);
