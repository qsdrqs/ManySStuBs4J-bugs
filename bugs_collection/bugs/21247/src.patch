diff --git a/buggy/api/src/main/java/org/openmrs/reporting/export/DataExportReportObject.java b/fixed/api/src/main/java/org/openmrs/reporting/export/DataExportReportObject.java
index 8ffe873eb..213d2eeb9 100644
--- a/buggy/api/src/main/java/org/openmrs/reporting/export/DataExportReportObject.java
+++ b/fixed/api/src/main/java/org/openmrs/reporting/export/DataExportReportObject.java
@@ -192,7 +192,7 @@ public class DataExportReportObject extends AbstractReportObject implements Seri
 			cohort = new Cohort(getPatientIds());
 		}
 		
-		if (location != null && !location.equals("")) {
+		if (location != null && !location.equals(new Location())) {
 			cohort = intersectFast(cohort, pss.getPatientsHavingLocation(getLocation()));
 		}
 		
