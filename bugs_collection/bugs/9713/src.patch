diff --git a/buggy/ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java b/fixed/ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java
index 2e77bc4b9..954619118 100644
--- a/buggy/ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java
+++ b/fixed/ql/src/java/org/apache/hadoop/hive/ql/metadata/Partition.java
@@ -283,7 +283,7 @@ public class Partition implements Serializable {
   public void setOutputFormatClass(Class<? extends HiveOutputFormat> outputFormatClass) {
     this.outputFormatClass = outputFormatClass;
     tPartition.getSd().setOutputFormat(HiveFileFormatUtils
-        .getOutputFormatSubstitute(outputFormatClass).toString());
+        .getOutputFormatSubstitute(outputFormatClass).getName());
   }
 
   final public Class<? extends InputFormat> getInputFormatClass()
