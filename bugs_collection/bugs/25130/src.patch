diff --git a/buggy/connector/src/main/java/org/jboss/as/connector/deployers/processors/StructureDriverProcessor.java b/fixed/connector/src/main/java/org/jboss/as/connector/deployers/processors/StructureDriverProcessor.java
index 42a9d2272..b3a67e2b2 100644
--- a/buggy/connector/src/main/java/org/jboss/as/connector/deployers/processors/StructureDriverProcessor.java
+++ b/fixed/connector/src/main/java/org/jboss/as/connector/deployers/processors/StructureDriverProcessor.java
@@ -72,7 +72,7 @@ public final class StructureDriverProcessor implements DeploymentUnitProcessor {
         for (ResourceRoot resourceRoot : resourceRoots) {
             final VirtualFile deploymentRoot = resourceRoot.getRoot();
 
-            if (deploymentRoot.getChild("META-INF/services/java.sql.Driver") != null)  {
+            if (deploymentRoot.getChild("META-INF/services/java.sql.Driver").exists())  {
                 deploymentUnit.putAttachment(Attachments.IGNORE_OSGI, Boolean.TRUE);
                 break;
             }
