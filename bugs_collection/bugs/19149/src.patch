diff --git a/buggy/community/kernel/src/test/java/org/neo4j/kernel/impl/nioneo/store/PersistenceWindowPoolRaceTestIT.java b/fixed/community/kernel/src/test/java/org/neo4j/kernel/impl/nioneo/store/PersistenceWindowPoolRaceTestIT.java
index 5323a7d64..e609f9539 100644
--- a/buggy/community/kernel/src/test/java/org/neo4j/kernel/impl/nioneo/store/PersistenceWindowPoolRaceTestIT.java
+++ b/fixed/community/kernel/src/test/java/org/neo4j/kernel/impl/nioneo/store/PersistenceWindowPoolRaceTestIT.java
@@ -143,7 +143,7 @@ public class PersistenceWindowPoolRaceTestIT
             {
                 while ( mailbox.get() == null )
                 {
-                    long id = random.nextLong() % maxId;
+                    long id = Math.abs(random.nextLong() % maxId);
                     PersistenceWindow window = pwp.acquire( id, OperationType.WRITE );
                     window.getOffsettedBuffer( id ).put( (byte) (0xFF & random.nextInt()) );
                     pwp.release( window );
