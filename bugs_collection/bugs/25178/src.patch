diff --git a/buggy/ejb3/src/main/java/org/jboss/as/ejb3/component/ArrayKey.java b/fixed/ejb3/src/main/java/org/jboss/as/ejb3/component/ArrayKey.java
index 43faf0f30..31442a8f0 100644
--- a/buggy/ejb3/src/main/java/org/jboss/as/ejb3/component/ArrayKey.java
+++ b/fixed/ejb3/src/main/java/org/jboss/as/ejb3/component/ArrayKey.java
@@ -40,9 +40,9 @@ class ArrayKey {
 
     @Override
     public boolean equals(Object obj) {
-        if (!obj.getClass().isArray())
+        if (!(obj instanceof ArrayKey))
             return false;
-        return Arrays.equals(a, (Object[]) obj);
+        return Arrays.equals(a, ((ArrayKey) obj).a);
     }
 
     @Override
