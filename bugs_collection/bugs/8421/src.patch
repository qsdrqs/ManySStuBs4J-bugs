diff --git a/buggy/flink-staging/flink-streaming/flink-streaming-core/src/main/java/org/apache/flink/streaming/api/function/source/FileSourceFunction.java b/fixed/flink-staging/flink-streaming/flink-streaming-core/src/main/java/org/apache/flink/streaming/api/function/source/FileSourceFunction.java
index d7df26629..928935511 100644
--- a/buggy/flink-staging/flink-streaming/flink-streaming-core/src/main/java/org/apache/flink/streaming/api/function/source/FileSourceFunction.java
+++ b/fixed/flink-staging/flink-streaming/flink-streaming-core/src/main/java/org/apache/flink/streaming/api/function/source/FileSourceFunction.java
@@ -67,7 +67,7 @@ public class FileSourceFunction extends RichParallelSourceFunction<String> {
 				String record = serializer.createInstance();
 
 				format.open(split);
-				while (!format.reachedEnd()) {
+				while (isRunning && !format.reachedEnd()) {
 					if ((record = format.nextRecord(record)) != null) {
 						collector.collect(record);
 					}
