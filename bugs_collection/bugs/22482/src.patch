diff --git a/buggy/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/OnPropertyCondition.java b/fixed/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/OnPropertyCondition.java
index 122e6715c..cd8822d21 100644
--- a/buggy/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/OnPropertyCondition.java
+++ b/fixed/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/condition/OnPropertyCondition.java
@@ -87,7 +87,7 @@ class OnPropertyCondition extends SpringBootCondition {
 					+ expandNames(prefix, missingProperties) + " ");
 		}
 		if (!nonMatchingProperties.isEmpty()) {
-			String expected = havingValue == null ? "!false" : havingValue;
+			String expected = StringUtils.hasLength(havingValue) ? havingValue : "!false";
 			message.append("expected '").append(expected).append("' for properties ")
 					.append(expandNames(prefix, nonMatchingProperties));
 		}
