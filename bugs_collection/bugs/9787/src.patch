diff --git a/buggy/ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionPoolManager.java b/fixed/ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionPoolManager.java
index 041639dbc..0d0ac41a8 100644
--- a/buggy/ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionPoolManager.java
+++ b/fixed/ql/src/java/org/apache/hadoop/hive/ql/exec/tez/TezSessionPoolManager.java
@@ -271,7 +271,7 @@ public class TezSessionPoolManager {
   public void closeAndOpen(TezSessionState sessionState, HiveConf conf)
       throws Exception {
     HiveConf sessionConf = sessionState.getConf();
-    if (sessionConf.get("tez.queue.name") != null) {
+    if (sessionConf != null && sessionConf.get("tez.queue.name") != null) {
       conf.set("tez.queue.name", sessionConf.get("tez.queue.name"));
     }
     close(sessionState);
