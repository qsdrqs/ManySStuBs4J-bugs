diff --git a/buggy/modules/VisualizationImpl/src/main/java/org/gephi/visualization/octree/Octree.java b/fixed/modules/VisualizationImpl/src/main/java/org/gephi/visualization/octree/Octree.java
index 304d483eb..602c0d969 100644
--- a/buggy/modules/VisualizationImpl/src/main/java/org/gephi/visualization/octree/Octree.java
+++ b/fixed/modules/VisualizationImpl/src/main/java/org/gephi/visualization/octree/Octree.java
@@ -418,7 +418,7 @@ public class Octree {
                     nodesLength = octant.nodesLength;
                 }
             }
-            return true;
+            return pointer != null;
         }
 
         @Override
@@ -520,7 +520,7 @@ public class Octree {
                     pointer = edges[edgeId++];
                 }
                 if (pointer == null) {
-                    if (nodeItr.hasNext()) {
+                    if (nodeItr != null && nodeItr.hasNext()) {
                         NodeModel node = nodeItr.next();
                         edges = node.getEdges();
                         edgeLength = edges.length;
