diff --git a/buggy/src/com/google/javascript/jscomp/DiagnosticGroup.java b/fixed/src/com/google/javascript/jscomp/DiagnosticGroup.java
index c03fac322..08c12b622 100644
--- a/buggy/src/com/google/javascript/jscomp/DiagnosticGroup.java
+++ b/fixed/src/com/google/javascript/jscomp/DiagnosticGroup.java
@@ -67,7 +67,7 @@ public class DiagnosticGroup implements Serializable {
       Maps.newHashMap();
 
   /** Create a diagnostic group that matches only the given type. */
-  public static DiagnosticGroup forType(DiagnosticType type) {
+  public static synchronized DiagnosticGroup forType(DiagnosticType type) {
     if (!singletons.containsKey(type)) {
       singletons.put(type, new DiagnosticGroup(type));
     }
