diff --git a/buggy/hazelcast-ra/src/main/java/com/hazelcast/jca/XAResourceImpl.java b/fixed/hazelcast-ra/src/main/java/com/hazelcast/jca/XAResourceImpl.java
index e94f636c2..06c3dce3e 100644
--- a/buggy/hazelcast-ra/src/main/java/com/hazelcast/jca/XAResourceImpl.java
+++ b/fixed/hazelcast-ra/src/main/java/com/hazelcast/jca/XAResourceImpl.java
@@ -217,7 +217,7 @@ public class XAResourceImpl implements XAResource {
 
     private void validateTx(Xid xid,Transaction.State state) throws XAException {
         final Transaction tx = getTransaction(xid);
-        if(tx == null) {
+        if(tx != null) {
             switch (state){
                 case ACTIVE:
                     if(tx.getState() != Transaction.State.ACTIVE){
