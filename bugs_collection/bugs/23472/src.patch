diff --git a/buggy/src/edu/stanford/nlp/ie/crf/CRFLogConditionalObjectiveFunction.java b/fixed/src/edu/stanford/nlp/ie/crf/CRFLogConditionalObjectiveFunction.java
index 25e8792f7..3680c4e80 100644
--- a/buggy/src/edu/stanford/nlp/ie/crf/CRFLogConditionalObjectiveFunction.java
+++ b/fixed/src/edu/stanford/nlp/ie/crf/CRFLogConditionalObjectiveFunction.java
@@ -1528,7 +1528,7 @@ public class CRFLogConditionalObjectiveFunction extends AbstractStochasticCachin
 
       empiricalCountsForADoc(eHat4Update, ind);
       // TODO(mengqiu) broken, does not do E calculation
-      expectedCountsForADoc(weights, ind);
+      expectedCountsForADoc(weights, e4Update, ind);
 
       /* the commented out code below is to iterate over the batch docs instead of iterating over all
          parameters at the end, which is more efficient; but it would also require us to clearUpdateEs()
