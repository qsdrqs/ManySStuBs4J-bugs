diff --git a/buggy/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java b/fixed/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
index 9fd5a3f..823b528 100644
--- a/buggy/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
+++ b/fixed/modules/cpr/src/main/java/org/atmosphere/websocket/WebSocket.java
@@ -202,7 +202,7 @@ public abstract class WebSocket extends AtmosphereInterceptorWriter {
             }
 
             if (b != null) {
-                write(b, 0, length);
+                write(b, 0, b.length);
             }
         } else {
             String data = null;
