diff --git a/buggy/src/api/org/openmrs/api/db/hibernate/HibernateUserDAO.java b/fixed/src/api/org/openmrs/api/db/hibernate/HibernateUserDAO.java
index da9a215ae..668d5b187 100644
--- a/buggy/src/api/org/openmrs/api/db/hibernate/HibernateUserDAO.java
+++ b/fixed/src/api/org/openmrs/api/db/hibernate/HibernateUserDAO.java
@@ -104,7 +104,7 @@ public class HibernateUserDAO implements
 	public boolean hasDuplicateUsername(String username, String systemId, Integer userId) {
 		if (username == null || username.length() == 0)
 			username = "-";
-		if (systemId == null || username.length() == 0)
+		if (systemId == null || systemId.length() == 0)
 			systemId = "-";
 		
 		if (userId == null)
