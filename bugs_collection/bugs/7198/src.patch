diff --git a/buggy/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java b/fixed/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java
index 8dcd5e356..dd42c1f69 100644
--- a/buggy/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java
+++ b/fixed/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java
@@ -179,7 +179,7 @@ public abstract class AbstractCamelContextFactoryBean<T extends ModelCamelContex
             getContext().addInterceptStrategy(delayer);
         }
         InflightRepository inflightRepository = getBeanForType(InflightRepository.class);
-        if (delayer != null) {
+        if (inflightRepository != null) {
             LOG.info("Using custom InflightRepository: " + inflightRepository);
             getContext().setInflightRepository(inflightRepository);
         }
