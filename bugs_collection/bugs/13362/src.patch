diff --git a/buggy/presto-hive/src/main/java/com/facebook/presto/hive/HiveMetadata.java b/fixed/presto-hive/src/main/java/com/facebook/presto/hive/HiveMetadata.java
index 51c4d7403..d41568db7 100644
--- a/buggy/presto-hive/src/main/java/com/facebook/presto/hive/HiveMetadata.java
+++ b/fixed/presto-hive/src/main/java/com/facebook/presto/hive/HiveMetadata.java
@@ -1751,7 +1751,7 @@ public class HiveMetadata
         List<Column> tableColumns = table.getDataColumns();
         ImmutableMap.Builder<String, Optional<String>> builder = ImmutableMap.builder();
         for (Column field : concat(tableColumns, table.getPartitionColumns())) {
-            if ((field.getComment() != null) && !Optional.of("from deserializer").equals(field.getComment())) {
+            if (field.getComment().isPresent() && !field.getComment().get().equals("from deserializer")) {
                 builder.put(field.getName(), field.getComment());
             }
             else {
