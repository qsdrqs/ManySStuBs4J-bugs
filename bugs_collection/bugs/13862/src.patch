diff --git a/buggy/presto-main/src/main/java/com/facebook/presto/sql/planner/PlanFragment.java b/fixed/presto-main/src/main/java/com/facebook/presto/sql/planner/PlanFragment.java
index 72e0c8fa5..d895cf544 100644
--- a/buggy/presto-main/src/main/java/com/facebook/presto/sql/planner/PlanFragment.java
+++ b/fixed/presto-main/src/main/java/com/facebook/presto/sql/planner/PlanFragment.java
@@ -90,7 +90,7 @@ public class PlanFragment
         checkArgument(ImmutableSet.copyOf(root.getOutputSymbols()).containsAll(outputLayout),
                 "Root node outputs (%s) don't include all fragment outputs (%s)", root.getOutputSymbols(), outputLayout);
 
-        types = root.getOutputSymbols().stream()
+        types = outputLayout.stream()
                 .map(symbols::get)
                 .collect(toImmutableList());
 
