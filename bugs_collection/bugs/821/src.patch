diff --git a/buggy/underfs/gcs/src/main/java/alluxio/underfs/gcs/GCSUnderFileSystemFactory.java b/fixed/underfs/gcs/src/main/java/alluxio/underfs/gcs/GCSUnderFileSystemFactory.java
index 7cd6e0e..0c6c3ef 100644
--- a/buggy/underfs/gcs/src/main/java/alluxio/underfs/gcs/GCSUnderFileSystemFactory.java
+++ b/fixed/underfs/gcs/src/main/java/alluxio/underfs/gcs/GCSUnderFileSystemFactory.java
@@ -72,15 +72,15 @@ public final class GCSUnderFileSystemFactory implements UnderFileSystemFactory {
    * @return true if both access and secret key are present, false otherwise
    */
   private boolean addAndCheckGoogleCredentials(Configuration configuration) {
+    // TODO(binfan): remove System.getProperty as it is covered by configuration
     String accessKeyConf = Constants.GCS_ACCESS_KEY;
-    if (System.getProperty(accessKeyConf) != null && configuration.get(accessKeyConf) == null) {
+    if (System.getProperty(accessKeyConf) != null && !configuration.containsKey(accessKeyConf)) {
       configuration.set(accessKeyConf, System.getProperty(accessKeyConf));
     }
     String secretKeyConf = Constants.GCS_SECRET_KEY;
-    if (System.getProperty(secretKeyConf) != null && configuration.get(secretKeyConf) == null) {
+    if (System.getProperty(secretKeyConf) != null && !configuration.containsKey(secretKeyConf)) {
       configuration.set(secretKeyConf, System.getProperty(secretKeyConf));
     }
-    return configuration.get(accessKeyConf) != null
-        && configuration.get(secretKeyConf) != null;
+    return configuration.containsKey(accessKeyConf) && configuration.containsKey(secretKeyConf);
   }
 }
