diff --git a/buggy/components/camel-http4/src/main/java/org/apache/camel/component/http4/HttpEndpoint.java b/fixed/components/camel-http4/src/main/java/org/apache/camel/component/http4/HttpEndpoint.java
index c5c82bc3..b589e655 100644
--- a/buggy/components/camel-http4/src/main/java/org/apache/camel/component/http4/HttpEndpoint.java
+++ b/fixed/components/camel-http4/src/main/java/org/apache/camel/component/http4/HttpEndpoint.java
@@ -132,7 +132,7 @@ public class HttpEndpoint extends HttpCommonEndpoint {
         clientBuilder.setDefaultCookieStore(cookieStore);
         // setup the httpConnectionManager
         clientBuilder.setConnectionManager(clientConnectionManager);
-        if (getClientConnectionManager() == getComponent().getClientConnectionManager()) {
+        if (getComponent() != null && getComponent().getClientConnectionManager() == getClientConnectionManager()) {
             clientBuilder.setConnectionManagerShared(true);
         }
 
