diff --git a/buggy/presto-main/src/main/java/com/facebook/presto/byteCode/MethodDefinition.java b/fixed/presto-main/src/main/java/com/facebook/presto/byteCode/MethodDefinition.java
index c602177a1..4f476a244 100644
--- a/buggy/presto-main/src/main/java/com/facebook/presto/byteCode/MethodDefinition.java
+++ b/fixed/presto-main/src/main/java/com/facebook/presto/byteCode/MethodDefinition.java
@@ -102,7 +102,7 @@ public class MethodDefinition
         }));
 
         if (!access.contains(STATIC)) {
-            getCompilerContext().declareThisVariable(type(Object.class));
+            getCompilerContext().declareThisVariable(declaringClass.getType());
         }
         int argId = 0;
         for (NamedParameterDefinition parameter : parameters) {
