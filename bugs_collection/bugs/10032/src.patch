diff --git a/buggy/storm-core/src/jvm/backtype/storm/messaging/netty/Client.java b/fixed/storm-core/src/jvm/backtype/storm/messaging/netty/Client.java
index 08f5d2a72..8e661938a 100644
--- a/buggy/storm-core/src/jvm/backtype/storm/messaging/netty/Client.java
+++ b/fixed/storm-core/src/jvm/backtype/storm/messaging/netty/Client.java
@@ -317,7 +317,7 @@ public class Client extends ConnectionWithStatus implements IStatefulObject {
      * If the write operation fails, then we will close the channel and trigger a reconnect.
      */
     private void flushMessages(Channel channel, final MessageBatch batch) {
-        if(batch.isEmpty()){
+        if(null == batch || batch.isEmpty()){
             return;
         }
 
