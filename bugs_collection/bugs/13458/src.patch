diff --git a/buggy/presto-main/src/main/java/com/facebook/presto/execution/scheduler/SourcePartitionedScheduler.java b/fixed/presto-main/src/main/java/com/facebook/presto/execution/scheduler/SourcePartitionedScheduler.java
index 1616a54c7..ee5441289 100644
--- a/buggy/presto-main/src/main/java/com/facebook/presto/execution/scheduler/SourcePartitionedScheduler.java
+++ b/fixed/presto-main/src/main/java/com/facebook/presto/execution/scheduler/SourcePartitionedScheduler.java
@@ -223,7 +223,7 @@ public class SourcePartitionedScheduler
                 splitAssignment = splitPlacementResult.getAssignments();
 
                 // remove splits with successful placements
-                pendingSplits.removeAll(splitAssignment.values());
+                splitAssignment.values().forEach(pendingSplits::remove); // AbstractSet.removeAll performs terribly here.
                 overallSplitAssignmentCount += splitAssignment.size();
 
                 // if not completed placed, mark scheduleGroup as blocked on placement
