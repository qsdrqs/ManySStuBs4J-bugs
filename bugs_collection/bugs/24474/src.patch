diff --git a/buggy/ejb3/src/main/java/org/jboss/as/ejb3/tx/CMTTxInterceptor.java b/fixed/ejb3/src/main/java/org/jboss/as/ejb3/tx/CMTTxInterceptor.java
index cd400216d..d65445d0b 100644
--- a/buggy/ejb3/src/main/java/org/jboss/as/ejb3/tx/CMTTxInterceptor.java
+++ b/fixed/ejb3/src/main/java/org/jboss/as/ejb3/tx/CMTTxInterceptor.java
@@ -79,7 +79,7 @@ public class CMTTxInterceptor implements Interceptor {
      */
     protected void endTransaction(final TransactionManager tm, final Transaction tx) {
         try {
-            if (tx != tm.getTransaction()) {
+            if (! tx.equals(tm.getTransaction())) {
                 throw EjbLogger.ROOT_LOGGER.wrongTxOnThread(tx, tm.getTransaction());
             }
             final int txStatus = tx.getStatus();
