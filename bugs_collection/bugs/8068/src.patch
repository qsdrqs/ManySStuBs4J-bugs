diff --git a/buggy/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/TaskManagerServices.java b/fixed/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/TaskManagerServices.java
index e211fc07d..d4e27e0f5 100644
--- a/buggy/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/TaskManagerServices.java
+++ b/fixed/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/TaskManagerServices.java
@@ -527,14 +527,14 @@ public class TaskManagerServices {
 
 	@VisibleForTesting
 	public static ResourceProfile computeSlotResourceProfile(int numOfSlots, long managedMemorySize) {
-		int managedMemoryPerSlot = (int) (managedMemorySize / numOfSlots);
+		int managedMemoryPerSlotMB = (int) bytesToMegabytes(managedMemorySize / numOfSlots);
 		return new ResourceProfile(
 			Double.MAX_VALUE,
 			Integer.MAX_VALUE,
 			Integer.MAX_VALUE,
 			Integer.MAX_VALUE,
 			Integer.MAX_VALUE,
-			managedMemoryPerSlot,
+			managedMemoryPerSlotMB,
 			Collections.emptyMap());
 	}
 
