diff --git a/buggy/src/com/google/javascript/jscomp/SourceFile.java b/fixed/src/com/google/javascript/jscomp/SourceFile.java
index aa30e2950..650d77228 100644
--- a/buggy/src/com/google/javascript/jscomp/SourceFile.java
+++ b/fixed/src/com/google/javascript/jscomp/SourceFile.java
@@ -109,7 +109,7 @@ public class SourceFile implements StaticSourceFile, Serializable {
       return;
     }
     try {
-      String[] sourceLines = getCode().split("\n");
+      String[] sourceLines = getCode().split("\n", -1);
       lineOffsets = new int[sourceLines.length];
       for (int ii = 1; ii < sourceLines.length; ++ii) {
         lineOffsets[ii] =
