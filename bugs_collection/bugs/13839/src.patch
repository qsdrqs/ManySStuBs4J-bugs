diff --git a/buggy/presto-main/src/main/java/com/facebook/presto/operator/OperatorContext.java b/fixed/presto-main/src/main/java/com/facebook/presto/operator/OperatorContext.java
index 472b3ceea..129964d08 100644
--- a/buggy/presto-main/src/main/java/com/facebook/presto/operator/OperatorContext.java
+++ b/fixed/presto-main/src/main/java/com/facebook/presto/operator/OperatorContext.java
@@ -250,7 +250,7 @@ public class OperatorContext
                 }
             });
         }
-        long newReservation = memoryReservation.getAndAdd(bytes);
+        long newReservation = memoryReservation.addAndGet(bytes);
         if (newReservation > maxMemoryReservation) {
             memoryReservation.getAndAdd(-bytes);
             throw new ExceededMemoryLimitException(getMaxMemorySize());
@@ -263,7 +263,7 @@ public class OperatorContext
             return false;
         }
 
-        long newReservation = memoryReservation.getAndAdd(bytes);
+        long newReservation = memoryReservation.addAndGet(bytes);
         if (newReservation > maxMemoryReservation) {
             memoryReservation.getAndAdd(-bytes);
             return false;
