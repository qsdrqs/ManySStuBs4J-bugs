diff --git a/buggy/presto-main/src/test/java/com/facebook/presto/block/BlockAssertions.java b/fixed/presto-main/src/test/java/com/facebook/presto/block/BlockAssertions.java
index 637030313..4ec778aac 100644
--- a/buggy/presto-main/src/test/java/com/facebook/presto/block/BlockAssertions.java
+++ b/fixed/presto-main/src/test/java/com/facebook/presto/block/BlockAssertions.java
@@ -144,7 +144,7 @@ public final class BlockAssertions
         }
         int[] ids = new int[length];
         for (int i = 0; i < length; i++) {
-            ids[i] = length % dictionarySize;
+            ids[i] = i % dictionarySize;
         }
         return new DictionaryBlock(length, builder.build(), wrappedIntArray(ids));
     }
@@ -254,7 +254,7 @@ public final class BlockAssertions
         }
         int[] ids = new int[length];
         for (int i = 0; i < length; i++) {
-            ids[i] = length % dictionarySize;
+            ids[i] = i % dictionarySize;
         }
         return new DictionaryBlock(length, builder.build(), wrappedIntArray(ids));
     }
