diff --git a/buggy/domain/src/main/java/org/jboss/as/deployment/module/ModuleDependencyProcessor.java b/fixed/domain/src/main/java/org/jboss/as/deployment/module/ModuleDependencyProcessor.java
index 6b3918840..7eed15d22 100644
--- a/buggy/domain/src/main/java/org/jboss/as/deployment/module/ModuleDependencyProcessor.java
+++ b/fixed/domain/src/main/java/org/jboss/as/deployment/module/ModuleDependencyProcessor.java
@@ -62,7 +62,7 @@ public class ModuleDependencyProcessor implements DeploymentUnitProcessor {
 
             final ModuleIdentifier dependencyId = ModuleIdentifier.fromString(dependencyParts[0]);
             boolean export = parseOptionalExportParams(dependencyParts, "export");
-            boolean optional = parseOptionalExportParams(dependencyParts, "export");
+            boolean optional = parseOptionalExportParams(dependencyParts, "optional");
             ModuleConfig.Dependency dependency = new ModuleConfig.Dependency(dependencyId, true, optional, export);
             ModuleDependencies.addDependency(context, dependency);
         }
